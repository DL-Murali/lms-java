pipeline {
    agent any
  
    stages{
        stage('Docker network') {
            steps {
                sh 'docker network create -d bridge lmsnetwork '
               }
          }
        stage('database container') {
            steps {
                
                sh 'sudo docker container run -d --name mysql --network lmsnetwork -e MYSQL_ROOT_PASSWORD=Qwerty@123 -p 3306:3306 mysql:latest'
             }
          }
        stage('Docker build') {
            steps {
                sh 'cd LMS-BE && sudo docker build -t backend .'
            }
          }
        stage('Docker container') {
            steps {
                sh 'sudo docker container run -dt --name be --network lmsnetwork -p 9090:8080 backend'
            }
        }
    }
}
